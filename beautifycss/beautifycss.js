// https://github.com/senchalabs/cssbeautify
(function(){'use strict';function a(b,d){function e(C){return' '===C||'\n'===C||'\t'===C||'\r'===C||'\f'===C}function f(C){return'\''===C||'"'===C}function g(C){return'a'<=q&&'z'>=q||'A'<=q&&'Z'>=q||'0'<=q&&'9'>=q||0<='-_*.:#[]'.indexOf(C)}function h(){var C;for(C=w;0<C;C-=1)p+=l.indent}function j(){p=B(p),z?p+=' {':(p+='\n',h(),p+='{'),'\n'!==r&&(p+='\n'),w+=1}function k(){var C;w-=1,p=B(p),0<p.length&&A&&(C=p.charAt(p.length-1),';'!==C&&'{'!==C&&(p+=';')),p+='\n',h(),p+='}',o.push(p),p=''}var l,o,q,r,t,u,v,w,x,y,B,m=0,n=b.length,p='',z=!0,A=!1;for(l=1<arguments.length?d:{},'undefined'==typeof l.indent&&(l.indent='    '),'string'==typeof l.openbrace&&(z='end-of-line'===l.openbrace),'boolean'==typeof l.autosemicolon&&(A=l.autosemicolon),B=String.prototype.trimRight?function(C){return C.trimRight()}:function(C){return C.replace(/\s+$/,'')},v={Start:0,AtRule:1,Block:2,Selector:3,Ruleset:4,Property:5,Separator:6,Expression:7,URL:8},w=0,u=v.Start,y=!1,o=[],b=b.replace(/\r\n/g,'\n');m<n;){if(q=b.charAt(m),r=b.charAt(m+1),m+=1,f(x)){p+=q,q==x&&(x=null),'\\'===q&&r==x&&(p+=r,m+=1);continue}if(f(q)){p+=q,x=q;continue}if(y){p+=q,'*'===q&&'/'===r&&(y=!1,p+=r,m+=1);continue}if('/'===q&&'*'===r){y=!0,p+=q,p+=r,m+=1;continue}if(u===v.Start){if(0===o.length&&e(q)&&0===p.length)continue;if(' '>=q||128<=q.charCodeAt(0)){u=v.Start,p+=q;continue}if(g(q)||'@'===q){if(t=B(p),0===t.length)0<o.length&&(p='\n\n');else if('}'===t.charAt(t.length-1)||';'===t.charAt(t.length-1))p=t+'\n\n';else for(;r=p.charAt(p.length-1),' '===r||9===r.charCodeAt(0);)p=p.substr(0,p.length-1);p+=q,u='@'===q?v.AtRule:v.Selector;continue}}if(u===v.AtRule){if(';'===q){p+=q,u=v.Start;continue}if('{'===q){t=B(p),j(),u='@font-face'===t?v.Ruleset:v.Block;continue}p+=q;continue}if(u===v.Block){if(g(q)){if(t=B(p),0===t.length)0<o.length&&(p='\n\n');else if('}'===t.charAt(t.length-1))p=t+'\n\n';else for(;r=p.charAt(p.length-1),' '===r||9===r.charCodeAt(0);)p=p.substr(0,p.length-1);h(),p+=q,u=v.Selector;continue}if('}'===q){k(),u=v.Start;continue}p+=q;continue}if(u===v.Selector){if('{'===q){j(),u=v.Ruleset;continue}if('}'===q){k(),u=v.Start;continue}p+=q;continue}if(u===v.Ruleset){if('}'===q){k(),u=v.Start,0<w&&(u=v.Block);continue}if('\n'===q){p=B(p),p+='\n';continue}if(!e(q)){p=B(p),p+='\n',h(),p+=q,u=v.Property;continue}p+=q;continue}if(u===v.Property){if(':'===q){p=B(p),p+=': ',u=v.Expression,e(r)&&(u=v.Separator);continue}if('}'===q){k(),u=v.Start,0<w&&(u=v.Block);continue}p+=q;continue}if(u===v.Separator){if(!e(q)){p+=q,u=v.Expression;continue}f(r)&&(u=v.Expression);continue}if(u===v.Expression){if('}'===q){k(),u=v.Start,0<w&&(u=v.Block);continue}if(';'===q){p=B(p),p+=';\n',u=v.Ruleset;continue}if(p+=q,'('===q&&'l'===p.charAt(p.length-2)&&'r'===p.charAt(p.length-3)&&'u'===p.charAt(p.length-4)){u=v.URL;continue}continue}if(u===v.URL&&')'===q&&p.charAt('\\'!==p.length-1)){p+=q,u=v.Expression;continue}p+=q}return p=o.join('')+p,p}'undefined'==typeof exports?'object'==typeof window&&(window.cssbeautify=a):module.exports=exports=a})();

textTool(function(val) {
    return cssbeautify(val);
}, function(err) {
    alert("Error beautifying css. Make sure the text you entered is valid css.");
});
